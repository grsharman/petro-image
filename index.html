<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenSeaDragon Spit View Example</title>
    <style>
        #viewer1, #viewer2 {
            position: absolute;
            top: 0;
            bottom: 0;
            overflow: hidden;
        }
        #viewer-container {
            position: relative;
            width: 100%;
            height: 100%;
        }
        #viewer1, #viewer2 {
            position: absolute;
            top: 0;
            bottom: 0;
            height: 100%;
        }
        #viewer1 {
            left: 0;
        }
        #viewer2 {
            right: 0;
        }
        #divider {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 2px;
            background: black;
            cursor: ew-resize;
        }
    </style>
</head>
<body>
    <div id="viewer-container">
        <div id="viewer1"></div>
        <div id="viewer2"></div>
        <div id="divider"></div>
    </div>
    <script src="js/openseadragon.min.js"></script>
    <script>
        var viewer1 = OpenSeadragon({
            id: "viewer1",
            prefixUrl: "js/images/",
            tileSources: "https://raw.githubusercontent.com/grsharman/petro-image/main/images/O48-013.dzi"
        });

        var viewer2 = OpenSeadragon({
            id: "viewer2",
            prefixUrl: "js/images/",
            tileSources: "https://raw.githubusercontent.com/grsharman/petro-image/main/images/O48-014.dzi"
        });

        function synchronizeViewers(master, slave) {
            master.addHandler('animation', function() {
                var masterCenter = master.viewport.getCenter();
                var masterZoom = master.viewport.getZoom();
                slave.viewport.panTo(masterCenter, true);
                slave.viewport.zoomTo(masterZoom, null, true);
            });

            master.addHandler('resize', function() {
                slave.viewport.viewportToImageRectangle(master.viewport.getBounds(true));
            });
        }

        synchronizeViewers(viewer1, viewer2);
        synchronizeViewers(viewer2, viewer1);

        var divider = document.getElementById('divider');
        var viewerContainer = document.getElementById('viewer-container');

        viewerContainer.addEventListener('mousemove', function(event) {
            var width = viewerContainer.clientWidth;
            var mouseX = event.clientX;
            var leftWidth = mouseX;
            var rightWidth = width - mouseX;

            viewer1.style.width = leftWidth + 'px';
            viewer2.style.width = rightWidth + 'px';
            viewer2.style.left = leftWidth + 'px';
            divider.style.left = mouseX + 'px';
        });

        viewerContainer.addEventListener('mouseleave', function(event) {
            viewer1.style.width = '50%';
            viewer2.style.width = '50%';
            viewer2.style.left = '50%';
            divider.style.left = '50%';
        });
    </script>
</body>
</html>